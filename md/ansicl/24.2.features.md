% Variable \*FEATURES\*

[UP](24.2.html)  

---

# Variable **\*FEATURES\***


Variable `*FEATURES*`


## 値の型

通常のリスト


## 初期値

実装依存


## 定義

[`*features*`](24.2.features.html)の値は、`features`リストと呼ばれます。
これはシンボルのリストであり、`features`と呼ばれ、
実装や環境のいくつかの状況に対応しています。

多くの`features`が実装依存の意味を持っています。
下記の示すものは割り当てられた`feature`の名前です。

- `:cltl1`
  - この値が存在するとき、
    `LISP`というパッケージが
    1984年に制定された`Common Lisp: The Language`に
    適合していることを示します。
    この`feature`をもつ適合する実装は、
    仕様に指定されたシンボルを`LISP`パッケージではなく
    `COMMON-LISP`パッケージ内にすることができますが、
    しかし必須ではありません。

- `:cltl2`
  - この値が存在するとき、
    実装は`Common Lisp: The Language, Second Edition`に
    適合していることを示します。
    この`feature`は、どのような適合する実装にも存在してはいけません。
    なぜならそのドキュメントへの適合性はこの仕様の適合性と互換性がないからです。
    しかし、この名前はこの仕様書によって、
    プログラムがそのドキュメントの適合によって実装されたものと
    またこの仕様書の適合によって実装されたものとの
    区別をする助けのために予約されています。

- `:ieee-floating-point`
  - この値が存在するとき、
    実装が`IEEE Standard for Binary Floating-Point Arithmetic`の要求に
    適合していることを示します。

- `:x3j13`
  - この値が存在するとき、
    実装がこの仕様書のドラフト版にあるいくつかの特定の要求に合致しているか、
    あるいは本仕様書に含まれる何らかのものについて、
    いくつか`feature`が含まれている部分があると信じられることを示します。
    適合した実装は、このような`feature`を含むかもしれないし含まないかもしれません
    （この`feature`は、時期尚早に`:draft-ansi-cl`や`:ansi-cl`を導入しないように、
    ドラフト版の標準を利用可能にするための
    一時しのぎであることを主な目的としています）。

- `:draft-ansi-cl`
  - この値が存在するとき、
    実装は1992年に公式にレビューされた本仕様の最初のドラフト版
    全てについて適合していることを示します。
    適合した実装は、`:draft-ansi-cl`の`feature`が含まれているときは、
    `:draft-ansi-cl-2`か`:ansi-cl`の`feature`持つことは許されていません。
    なぜなら最初のドラフトと続くものは互換性が無い変更があるためです。

- `:draft-ansi-cl-2`
  - この値が存在するとき、
    実装は公式にレビューされた本仕様の2番目のドラフト版
    全てについて適合していることを示します
    （もし追加のドラフト版の公式レビューが導入されたとき、
    このキーワードは2番目のドラフトを意味するものであると続く、
    追加のキーワードが後のドラフト版の適合についての識別子として追加されます。
    そのようなものとして、このキーワードの意味は、
    時間経過とともに変更されることはありません）。
    適合した実装は、`ansi-cl`の`feature`を持っているものについて、
    もし最終的に承認された標準が
    ドラフト版の標準と非互換性ではないときに、
    だた`:draft-ansi-cl`の`feature`のみを保持することが許されます。

- `:ansi-cl`
  - この値が存在するとき、
    実装はANSIによって採用された公式の標準である本仕様について
    適合していることを示します。

- `:common-lisp`
  - この`feature`は、
    `:x3j13`, `:draft-ansi-cl`, `:ansi-cl`の`feature`を
    ひとつ以上保有するような実装においては
    [`*features*`](24.2.features.html)に現れなければなりません。
    これは`:cltl1`か`:cltl2`の`feature`を持つような実装についても
    また現れなければいけませんが、
    しかし本仕様書はそのようなふるまいを強制できません。
    この`feature`は「Common Lisp」という名前のファミリーの言語と、
    そうではなくそのファミリー内の何らかの仕様書における方言と区別するための
    同一性を持たせるという意味を持っています。


## 例文

なし。


## 影響

なし。


## 参考

1.5.2.1.1. リアルタイムコンディションの使用,
2.4. 標準マクロ文字


## 備考

[`*features*`](24.2.features.html)の値は、リーダー構文の`#+`と`#-`によって使用されます。

`features`リスト内のシンボルは、
どのようなパッケージにもなれますが、
実際にはそれらは一般的に`KEYWORD`パッケージになります。
これは、 `feature`式を読み込むリーダーマクロの`#+`と`#-`が
標準で`KEYWORD`パッケージを使用するためです。
`feature`の名前をパッケージ`P`（`KEYWORD`ではなく）で
使用する必要があるコードは、
`P`へのパッケージ前置詞を明に使うことで実現できますが、
そのようなコードは
[`read`](23.2.read.html)で`feature`式を使うために
パッケージ`P`が存在することを保証しなければならず、
ある場合においては`feature`式の読み込みが失敗するかもしれません。

一般的に特定の実装で同一性を識別できる`feature`をひとつ以上含めることが
実装にとってより良いと考えられます。
そうすることにより条件式は他とは違うある実装の特異性として区別するような
書き方ができるようになります。
`feature`は通常`KEYWORD`パッケージのシンボルであるため、
結果として衝突が起こりやすく、
また誰がどのシンボルをどのような理由で使用する権利を持っているかを決定する
一意的なメカニズムがあるわけでもないので、
保守的な戦略として
自分の会社名や製品名から派生した名前を選択することができます。


---
[TOP](index.html),  [Github](https://github.com/nptcl/npt-japanese)

