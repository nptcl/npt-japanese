;;
;;  ANSI Common Lisp 日本語訳
;;  12. 数
;;

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;  Function LOG
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
@begin: 12.2.log
@name: log
@type: function

Function `LOG`


## {syntax}

`log` *number* `&optional` *base* => *logarithm*


## {arguments-and-values}

*number* - ゼロではない数  
*base* - 数  
*logarithm* - 数


## {description}

{log:link}は底が*base*のときの*number*の対数を返却します。
もし*base*が指定されなかったとき、
その値は自然対数の底である`e`になります。

{log:link}は、*number*が負の数が与えられたときに
複素数を返却するかもしれません。

```lisp
(log -1.0) ==  (complex 0.0 (float pi 0.0))
```

*base*がゼロのとき、{log:link}はゼロを返却します。

`(log 8 2)`の結果は、`3`か`3.0`のどちらかになり、実装に依存します。
実装は正確な整数で結果を表すことができるときでさえ、
浮動小数を用いて計算することができます。

ひとつの引数のときの対数関数（自然対数）のブランチカットは、
負の実軸に沿って第2象限へ続きます。
その領域は原点に排他的です。

複素関数の対数の数学的な定義は、
実装がマイナスゼロをサポートするかに関わらず
次のようになります。

```lisp
(log x) ==  (complex (log (abs x)) (phase x))
```

したがってひとつの引数の対数関数の範囲は、
複素平面に含まれる数の虚部において、
マイナスゼロがサポートされないときは`-pi`（含まれない）から`pi`（含む）、
マイナスゼロがサポートされるときは`-pi`（含む）から`pi`（含む）で分岐します。

2つの引数の対数関数は下記のように定義されます。

```lisp
(log base number)
==  (/ (log number) (log base))
```

この定義は主な値が正確です。
2つの引数の対数関数の範囲は複素平面全体です。


## {examples}

```lisp
(log 100 10)
=>  2.0
=>  2
(log 100.0 10) =>  2.0
(log #c(0 1) #c(0 -1))
=>  #C(-1.0 0.0)
OR=>  #C(-1 0)
(log 8.0 2) =>  3.0
(log #c(-16 16) #c(2 2)) =>  3 または #c(3.0 0.0)の近似
                               または 3.0の近似（可能性は低い）
```


## {affected-by}

実装


## {exceptional-situations}

なし。


## {see-also}

{exp:link},
{expt:link},
{12.1.3.3:ab}


## {notes}

なし。

@end

